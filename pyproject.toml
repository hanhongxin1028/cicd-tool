[build-system]
# ä½¿ç”¨æ ‡å‡†çš„ setuptools æ„å»ºç³»ç»Ÿ
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "cicd-tool"  # é¡¹ç›®åŒ…åï¼ˆpip install ç”¨çš„åå­—ï¼Œå¯ä¿®æ”¹ï¼‰
version = "0.1.0"
description = "A modern, client-server CI/CD automation tool."
readme = "README.md"
requires-python = ">=3.10"

# ğŸŸ¢ 1. æ ¸å¿ƒä¾èµ– (Client å’Œ Server éƒ½ä¼šç”¨åˆ°çš„)
# ----------------------------------------------------
dependencies = [
    "typer[all]>=0.9.0",   # ç°ä»£åŒ–çš„å‘½ä»¤è¡Œæ¡†æ¶
    "rich>=13.0.0",        # æ¼‚äº®çš„ç»ˆç«¯è¾“å‡º (é¢œè‰²ã€è¡¨æ ¼ã€è¿›åº¦æ¡)
    "pyyaml>=6.0",         # è§£æ cicd-config.yaml
    "pydantic>=2.0.0",     # å¼ºç±»å‹é…ç½®éªŒè¯ (å»ºè®®åŠ ä¸Šï¼Œæå‡å¥å£®æ€§)
    "python-dotenv>=1.0.0" # åŠ è½½ç¯å¢ƒå˜é‡
]

# ğŸŸ¡ 2. åˆ†ç«¯ä¾èµ–
# ----------------------------------------------------
[project.optional-dependencies]
# å®¢æˆ·ç«¯ä¸“ç”¨: pip install -e ".[client]"
client = [
    "inquirerpy>=0.3.4",   # äº¤äº’å¼å‘å¯¼ (ä¸Šä¸‹é”®é€‰æ‹© Feat/Fix)
    "paramiko>=3.3.0",     # SSH å®¢æˆ·ç«¯ (è¿æ¥æœåŠ¡å™¨ç”¨)
    "scp>=0.14.0"          # æ–‡ä»¶ä¼ è¾“å·¥å…·
]

# æœåŠ¡ç«¯ä¸“ç”¨: pip install -e ".[server]"
server = [
    # å¦‚æœæœåŠ¡ç«¯éœ€è¦æ“ä½œ Docker æˆ–è¿è¡Œ WSGI æœåŠ¡ï¼Œå¯ä»¥åœ¨è¿™é‡ŒåŠ 
    # "docker>=6.0.0",
    # "gunicorn>=20.0.0"
]


# ğŸ”´ 3. å‘½ä»¤å…¥å£æ³¨å†Œ (æœ€å…³é”®çš„éƒ¨åˆ†)
# æ ¼å¼: å‘½ä»¤å = "åŒ…è·¯å¾„.æ¨¡å—å:å‡½æ•°å"
# ----------------------------------------------------

[project.scripts]
# å®¢æˆ·ç«¯å…¥å£
cicd = "cicd.client.cli:app"

# æœåŠ¡ç«¯å…¥å£
cicd-runner = "cicd.server.runner:app"

# ğŸ”µ 4. ä»£ç ç›®å½•é…ç½®
# ----------------------------------------------------
[tool.setuptools.packages.find]
where = ["src"]  # ä»£ç å¿…é¡»æ”¾åœ¨ src/ ç›®å½•ä¸‹
include = ["cicd*"] # ä½ çš„åŒ…æ–‡ä»¶å¤¹åå­—